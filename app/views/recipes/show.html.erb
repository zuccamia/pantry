<% content_for :meta_title, "#{@recipe.recipe_name.capitalize} is on #{DEFAULT_META["meta_product_name"]}" %>
<% content_for :meta_description, @recipe[:summary][0..200] + "..." %>
<% content_for :meta_image, cl_image_path(@recipe.image) %>
<div class="container grid">
  <div class="recipe-card">
    <% if @recipe.image.nil? %>
      <%= cl_image_tag @recipe.photo.key, class: "recipe-card-photo", alt: "My Recipe" %>
    <% else %>
      <%= image_tag (@recipe.image), class: "recipe-card-photo" %>
    <% end %>
    <div class="recipe-card-body">
      <div class="recipe-card-title">
        <h3><%= @recipe.recipe_name.capitalize %>
          <a href="#" class="text-primary" data-toggle="modal" data-target="#editRecipe">
            <i class="far fa-edit"></i></a>
        </div>
      </div>
    </div>
    <div class="tags">
      <%= render 'shared/tag-list' %>
    </div>
    <h4 class="sub-heading">Ingredients</h4>
    <table>
      <% @available_items.each do |recipe_amount| %>
        <tr class="ingredient-box">
          <td><%= recipe_amount.item.item_name %> <span><i class="fas fa-check-circle"></i></span></td>
          <td><%= recipe_amount.description %></td>
        </tr>
      <% end %>
      <% @shopping_list.each do |recipe_amount| %>
        <tr class="ingredient-box">
          <td><%= recipe_amount.item.item_name %></td>
          <td><%= recipe_amount.description %></td>
        </tr>
      <% end %>
    </table>
    <h4 class="sub-heading">Instructions</h4>
    <div class="content-box">
      <p><%= simple_format(@recipe.instructions) %></p>
    </div>
    <%= link_to "Delete recipe", recipe_path(@recipe), method: :delete, data: { confirm: "Delete recipe?" }, class: "action-button-solid" %>
  </div>
  <%= render 'edit-modal' %>